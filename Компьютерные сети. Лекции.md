# Лекция 3
>[Слайд 10]

2. Последующие уровни добавляет к этому уровню свои заголовки, исходя из данных заголовка предыдущего уровня
3. На физическом уровне блок данных обрастает заголовками всех уровней
4. На приемном участке обрабатывает заголовок каждого уровня и исключает его из блока данных. Передает на более высокие уровни. Единицы данных, передаваемые от уровню к уровню имеет свои названия. Общие названия для каждого уровня в соответствии с моделью osi - protocol data unit. В модели osi различают 2 типа протоколов взаимодействия:
    *   _С установлением соединения (connection oriented)_ - источник и адресат должны установить соединение, а затем передавать данные. После окончания они должны разорвать соединение. Установка и разрыв соединения происходят установленным порядком.
    *   _Без установления соединения (connectionless)_ - дэйтаграмные протоколы.

## Уровни модели osi
> Слайд 11

*   __Физический уровень.__ Непосредственно имеет дело с передачей битов по физической линии связи. (Не путать линию связи и канал связи. В линни может быть несколько каналов). Иногда называют ф. средой передачи информации Пример: эфир, кабель, витая пара). Протоколы определяются характеристиками физических сред: полоса пропускания, помехозащищенность, волновое сопротивление и др. На уровне действуют сигналы с определенными характеристиками: уровни напряжения и тока, частота (смесь частот), тип кодирования и др. Пример: физический уровень реализуется в сетевом адаптера локальной сети, который соединен с витой парой, например в спецификации 10Base-T относятся технологии Ethernet которые в качестве кабеля используют неэкранированную витую пару категории 3 с волновым сопротивлением 100 ОМ с разьемом RJ-45, максимальная длина непрерывного физического сегмента 100м, логический код представления данных - манчестерское кодирование.

> Слайд 16

*   __Канальный уровень.__ Одной из задач уровней является определение доступности (готовности среды передачи для того, чтобы можно было передавть линию связи). Проблема возникает испольщуется общая среда (один моноканал). Пример: локальная сеть с шинной топологией. Другой функцией канального уровня явлется обнаружение и исправления ошибок. Другой функцией уровян является группировка в кадры. На этом уровне формируются фреймы. Уровень обеспечивает корректную передачу и прием каждого кадра помещая специальную последовательность битов в конец каждого кадра, а так же вычисляет контрольную сумму по определенному алгоритму и записывает в заголовок. При получении адресатом заново выполняет эти функции и сравнивает с принятыми значениями: если совпадают - хорошо, если нет - ошибка. Примеры протоколов: Ethernet, TokenRing, RDDI. Протоколы канального уровня используются рабочими станциями, мостами, коммутаторами и маршрутизаторами. Уровень реализуется в драйвере сетевого адаптера. Для глобальных сетей примеры протоколов: PPP, LAPB.
Часто функции канального уровня объединяются с уровнем сететвого уровня и часто выделить канальный уровня не всегда представляется возможным. Доставка сообщений на канальном уровне осуществляется только в пределах одного сегмента локальной сети. Передать информацию до любого узла составной сети не представляется возможным (нужен сететвой уровень).

> Слайд 17

*   Сетевой уровень. Служит для образования единой транспортной системы, позволяющий передавать от рабочей станции одного сегмента составной сети до рабочей станции другого сегмента составной сети. Пример: объединение двух локальной сети через магистральную сеть. Сети объединяются через маршрутизаторы. Информация передаются прыжками ("хопами") от одного маршрутизатора до другого, пока не придет маршрутизатору, которым определена сеть.

> __Выбор наилучшего маршрута__ - марщрутизация - одна из главных задач сетевого уровня.

Критерии выбора маршрута:
-   Интенсивность трафика
-   Надежность линии связи
-   Время доставки

Блок данных доставке на сетевом уровне называется пакет.
На сетевом уровне различают следующие типы протоколов:
-   __Сетевые протоколы.__ Реализует продвижение пакетов через сеть.
-   __Протоколы маршрутизации.__ С помощью этих протоколов маршрутизаторы собирают информацию о топологии сети и межсетевых подключениях (существующих маршрутах). Данные протоколы реализуются компонентами ОС и аппаратными средствами маршрутизаторов.
-   __Протоколы разрешения адресов.__ Преобразование сетевого адреса в mac-адрес, на основании которого осуществляется передача на канальном уровне. И в обратную сторону (из mac в сетевой). Адреса сетевые назначаются динамически, т. е. могут отличаться от сеанса к сеансу, а mac-адреса встроеные, уникальные. Пример: ARP, RARP. Пример протокола сетевого уровня: IP
-   __Транспортный уровень.__ Обеспечивает протоколом более высокого уровня аппарат для передачи данных с определенной степенью надежности. Можно выделить 5 типов сервиса, предоставляемых транспортным уровнем, по качеству:
    -   Срочность передачи
    -   Возможность, невозможность восстановления связи.
    -   Возможностью/Невозможностью мультеплексирования
    -   Исправление ошибок передачи

    Облекченные сервисы используются когда вероятность ошибок мала и обнаружение и исправление ошибок на низких уровнях велика. Протоколы транспортного уровня реализуются компонентами ОС.

> Протоколы первых четырех уровней модели osi называются __транспортной сущностью__. С помощью этих четырех уровней можно передать информацию из любой рабочей станции отправителя, любому получателю составной сети.

Перечень протоколов, используемых в локальных сетях и глобальных сетях этих уровней различны. Пример: в интернет - OSPF и BGP - в локальных сетях не используются.

-   __Сеансовый уровень.__ Обеспечивает управление диалогом при взаимодействии:  фиксирует какая из сторон является активной и осуществляет синхронизацию между отправителем и получателем. Позволяет вставлять контрольные точки в данные, чтобы к ней можно было откатиться, а не начинать передачу заново. Редко реализуется в виде отдельных протоколов. Объединяется с функциями прикладного уровня.
-   __Представительский уровень.__ Определяет формат передаваемой информации не
меняя ее содержимого. Информация в кодировке одной системы представляется в кодировке другой системы. На этом уровне может осуществляется шифрование данных (SSL).
-   __Прикладной уровень__. Набор протоколов по которому пользователи получают доступ к ресурсам. Еденица передаваемых данных - message. Примеры: HTTP, FTP.

Три нижних уровня - сетезависимые, т. е. тесно связаны с аппаратной реализацией сети и коммуникационным оборудованием. Например при переходе на FDDI меняется список протоколов нижних уровней. Следующие три уровня не завият от сетевого оборудования.

Модели osi не единственная модель сетевого взаимодействия.

## Источники стандартов по сетевому взаимодействию
> __Открытая система__ - любая система, построенная в соответствии с открытыми спецификациями.

> __Спецификация__ - формальное описание программных или аппаратных компонентов

> __Открытая спецификация__. Опубликованные, вседоступные, принятые после всестороннего обсуждения соглашения или стандарты. Пример: Internet

Основные источники стандартов по сетевому взаимодействию:
-   Стандарты фирм
-   Стандарты международных комитетов и объединений. Пример: ATM на основе ATM Forum
-   Национальные стандарты. FDDI созданы институтом ANSI
-   Международные стандарты.

Национальные стандарты становятся международными. Пример Ethernet IEEE-802.3x затем стал стандартом ISO-8802.3.

# Лекция 4
> [Слайд 23]

## Стеки коммуникационных протоколов
Важно разделять модель osi и стек стек протоколов модели osi. Модель osi — концептуальная схема взаимодействия, стек osi — набор конкретных протоколов, реализующих эту модель.

### Стек модели osi
Стек модели osi полностью соответствует модели, т. е. 7 уровни взаимодействия — на каждом уровне есть группа протоколов. Проколы стека osi — сложные и имеют неоднозначные спецификации т. к. разрабатывались различными группами разработчиков.

На физическом уровне и канальном 1 - 2 стек osi поддерживает протоколы ethernet, Tokenring, DDI и др. Сететвой уровень 3 включает протоколы CONP и CLNP. Первый основан на соединении, второй — нет. Протоколы маршрутизации ES-ES, IS-IS.

На сеансовом и транспортном уровне (4 и 5), определяются классами обслуживании и получает транспортный сервис, независимо от протоколов сететвого уровня.

На прикладном уровне (7) обеспечивает взаимодействие приложений с целью передачи данных, эмуляции терминала, службы сетевых каталогов и.т.д. Характерно все протоколы зайдействоны на всех уровнях.

### Стек протоколов IPX/SPX
В качестве протокола маршрутизации используются NLSP. Стек протоколов osi не в полной мере отображает модель osi. Особенности обусловлены ранней версией DOS и малым кол-вом пользователей. Если кол-во пользователей больше 50, перегружалась сеть и работала очень медленно. В настоящее время, в некоторых организациях эконом класса продолжается использование

###  Стек NetBIOS / SMB
NetBIOS появился в 80-ых годах как расширение стандартных функций биоса. В дальнейшим был замещен протоколом NetBEUI для обеспечения совместимости приложений в качестве NetBEUI был сохранен интерфейс биоса. Разработан для ЛВС, кол-во пользователей которых до 200. Стек не обеспечивает маршрутизацию пакетов, нельзя использовать в составных сетях. Протол SMB (Server Message Block) совмещает поддержку прикладного уровня. Поддерживается передача сообщений, пользовательская печать и.т.д.

###  Стек протоколов TCP / IP
Первоначально был реализован в Unix-подобных системах на которых строилась первоначально Internet. В дальнейшем развивался и стал основой, на которой реализуется сетевое взаимодействие Internet.
Особенности стека - возможно фрагментировать пакеты. Т. е. Если составная сеть построена на разных принципах, то длины передаваемых данных и сегментов могут быть разными. Возможно при переходе информации из одной сети в другую, необходимо делить на подходящие части. В TCP / IP это возможно.

-	Гибкая система адресации, позволяющая включать в составную сеть подсети различных топологий и способов адресации.

-	Экономично используемые широковещательные рассылки (рассылка всем), что способствует снижению трафика, особенно важно для медленных линий связи. Характерно для глобальных сетей, использующих линии связи общего пользования.

-	Высокие требования к потребляемым ресурсам и сложность администрирования (гибкая система адресации и экономичное использование широковещательных рассылок приводит к потребности иметь в сети специальные службы, такие как DNS, DHCP и др.)

Протокол TCP и IP были разработаны до модели osi, поэтому соответствие стека модели osi условно. На прикладном уровне объединяются 3: прикладной, сеансовый, представления. Транспортный уровень стека можно представить двумя протоколами. TCP — обеспечивает гарантированную доставку, UDP — доставку по возможности.

Для гарантированная доставки TCP устанавливает логическое соединение, нумерует пакеты и принимает квитанции об их получении. В случае потери пакета передает его повторно. На приемном конце уничтожает дублированные пакеты. Представляет полученные пакеты более выскому уровню в том порядке, в которым они были переданы (пакеты — сегменты). Есть возможность передачи в дуплексом режиме. Одновременно в оба конца.

UDP используется для доставки без установления соединения в том случае, когда задача надежного обмена не ставится, либо обеспечивается на более высоких уровнях.

TCP и UDP — инструментарий, который позволяет перемещать пакеты по составной сети.

Сетевой уровень стека — на этом уровне осуществляется передача данных по составной сети. Информация предоставляется от / в транспортный уровень.  Основной протокол — IP. Основная задача — продвижение пакета от одного маршрутизатора к другому до тех пор, пока он не дойдет до маршрутизатора сети назначения, где находится рабочая станция получатель. В отличе от протоколов прикладного и транспортного уровней развертывается не только на хостах, но и на всех шлюзах (смотри выше).

IP — дейтаграмный протокол, работает без установления соединения по принципу доставки «с максимальным усилием».

К протоколу сетевого уровня относится OSPF — протокол маршрутизации автономной системы в сети Internet. Сети Internet представляется набором автономных соединенных систем, соединенных магистральной сетью. BGP — протокол маршрутизации между автономными системами. Протоколы маршрутизации строят таблицы маршрутизации, на основании которых протокол IP передает пакеты в том или ином направлении. Протоколы ICMP (Internet Control Message Protocol) — протокол обмена межсетевыми управляющими сообщениями. Предназначен в том числе для передачи маршрутизатору-источнику информацию об ошибках маршрутизатором-получаетелм. IGMP (Internet Group Menegment Protocol) ­- предназначен для направления информации по нескольким адресам. Если всем называется циркуляр.

Канальный уровень и физический уровень реализует доступ к среде передачи, формирует кадры, согласует уровень сигналов кодирования и синхронизации. Особенность составной сети стека TCP / IP является возможность подключения новой сети со своей технологией передачи данных. Новая технология может включатся в стек путем разработки и опубликования нового документа к спецификации RFC (Request for comments) — определяет метод инкапсуляции пакетов новой технологии, передаваемой по сети. Например RFC 1577 Определяет работу протокола IP через сеть ATM. При этом, включение новой технологии в составную сеть TCP / IP не зависит от количества уровней, которыми описывается новая технология.

В сети стека TCP / IP каждый коммуникационный протокол оперирует единицей передачи данных.

> [Слайд 27]

Выводы. Соответствие стека протоколов модели osi — условное. Несоответствие вызвано сокращением компонент для увеличения скорости работы в ущерб модульности. Ни один стек известных протоколов не имеет реализаций всех семи уровней, как правило взаимодействие осуществляется на 3-4 уровнях. Первый — физический, канальный (сетевой адаптер), второй — сетевой уровень(маршрутизатор), третий - транспортный уровень (компоненты ОС, реализующих передачу данных), четвертый — уровень сетевой службы (реализуется приложением и соответствующей IPI) — сеансовый представления прикладной)

Распределение протоколов протоколов распределению сети. Как правило полный стек протоколов реализован только на конечных узлах (рабочих станциях), другие части сети реализуют 1-3 уровня

> [Слайд 29. Картинку нужно знать!]

Для продвижения пакета одного сегмента сети, достаточно два нижних уровня. Сотавной сети — три нижних уровня.

## Примеры сетей
В общем случае компьютерная сеть состоит из следующих подсистем (компонентов):
-	Терминальной оборудование (конечное оборудование, рабочая станция). В качестве терминального оборудования могут быть различные устройства: датчики, неинтеллектуальные терминалы и др. Могут быть интеллектуальные: рабочие станции, ЭВМ.
-	Сеть доступа — сеть, в которой находятся терминальное или конечное поборудование пользователя (локальная сеть, получатель либо источник).
-	Магистральная сеть — сеть, которая связывает сети доступа между собой.
-	Информационные центры (провайдеры сетевых услуг и сетевых служб).
